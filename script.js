// Данные для всех знаков зодиака
const zodiacData = {
    aries: {
        name: "Овен",
        dates: "21 марта - 19 апреля",
        element: "Огонь",
        icon: "♈",
        stones: ["Аметист", "Горный хрусталь", "Алмаз"],
        love: [
            "Сегодня вы можете встретить интересного человека, который привлечет ваше внимание. Будьте открыты к новым знакомствам.",
            "Звезды советуют проявить инициативу в любовных отношениях. Ваша активность будет вознаграждена.",
            "Возможны небольшие конфликты с партнером. Проявите терпение и понимание."
        ],
        finance: [
            "Финансовый день обещает быть удачным. Возможны неожиданные поступления денег.",
            "Будьте осторожны с крупными покупками. Лучше отложить серьезные финансовые решения на завтра.",
            "Сегодня хороший день для инвестиций в собственное образование или профессиональное развитие."
        ],
        health: [
            "Энергия сегодня на высоком уровне. Займитесь спортом или активным отдыхом.",
            "Возможны головные боли из-за перенапряжения. Дайте себе отдохнуть.",
            "Звезды рекомендуют обратить внимание на питание. Добавьте в рацион больше овощей и фруктов."
        ],
        advice: [
            "Не бойтесь брать на себя ответственность. Сегодня вы сможете справиться с любыми задачами.",
            "Проявите творческий подход к решению рабочих вопросов. Нестандартное мышление приведет к успеху.",
            "Не принимайте поспешных решений. Дайте себе время обдумать важные вопросы."
        ],
        luckyNumbers: [7, 14, 21, 28],
        dailyStones: ["Аметист", "Красная яшма", "Рубин"]
    },
    taurus: {
        name: "Телец",
        dates: "20 апреля - 20 мая",
        element: "Земля",
        icon: "♉",
        stones: ["Изумруд", "Бирюза", "Агат"],
        love: [
            "Романтические отношения сегодня будут гармоничными. Проведите время с любимым человеком.",
            "Одиноким Тельцам звезды советуют быть более открытыми. Новые знакомства возможны в неожиданных местах.",
            "Возможны разногласия из-за финансовых вопросов. Проявите дипломатичность."
        ],
        finance: [
            "Финансовая стабильность сегодня обеспечена. Хороший день для планирования бюджета.",
            "Возможны непредвиденные расходы. Будьте готовы к этому и не паникуйте.",
            "Сегодня удачный день для переговоров о повышении зарплаты или новых деловых контрактах."
        ],
        health: [
            "Обратите внимание на осанку. Длительное сидение может вызвать боли в спине.",
            "Эмоциональное состояние сегодня устойчивое. Практикуйте медитацию для поддержания баланса.",
            "Звезды советуют уделить время прогулкам на свежем воздухе."
        ],
        advice: [
            "Проявите настойчивость в достижении целей, но не будьте слишком упрямы.",
            "Доверьтесь своей интуиции при принятии важных решений.",
            "Не откладывайте на завтра то, что можно сделать сегодня."
        ],
        luckyNumbers: [4, 6, 15, 24],
        dailyStones: ["Изумруд", "Бирюза", "Малахит"]
    },
    gemini: {
        name: "Близнецы",
        dates: "21 мая - 20 июня",
        element: "Воздух",
        icon: "♊",
        stones: ["Агат", "Тигровый глаз", "Цитрин"],
        love: [
            "Сегодня день общения. Обсудите с партнером планы на будущее.",
            "Возможны интересные знакомства в социальных сетях или на деловых мероприятиях.",
            "Проявите внимание к деталям в отношениях. Мелочи сегодня имеют значение."
        ],
        finance: [
            "Хороший день для финансовых операций. Проверьте свои счета и составьте план расходов.",
            "Возможны небольшие, но приятные денежные поступления.",
            "Будьте осторожны с кредитами и долгами. Не берите на себя лишних обязательств."
        ],
        health: [
            "Обратите внимание на дыхательную систему. Избегайте сквозняков.",
            "Энергия может быстро истощаться. Делайте перерывы в работе.",
            "Звезды советуют практиковать йогу или стретчинг для снятия напряжения."
        ],
        advice: [
            "Не распыляйтесь на несколько дел одновременно. Сосредоточьтесь на главном.",
            "Ваши коммуникативные навыки сегодня на высоте. Используйте это в своих интересах.",
            "Будьте готовы к неожиданным новостям. Сохраняйте спокойствие."
        ],
        luckyNumbers: [3, 12, 21, 30],
        dailyStones: ["Тигровый глаз", "Хризопраз", "Горный хрусталь"]
    },
    cancer: {
        name: "Рак",
        dates: "21 июня - 22 июля",
        element: "Вода",
        icon: "♋",
        stones: ["Жемчуг", "Лунный камень", "Изумруд"],
        love: [
            "День эмоций и чувств. Проявите заботу о близких.",
            "Возможны ностальгические воспоминания. Это хорошее время для укрепления семейных связей.",
            "Будьте осторожны с излишней чувствительностью. Не принимайте все близко к сердцу."
        ],
        finance: [
            "Финансовая интуиция сегодня на высоте. Доверяйте своим ощущениям при принятии решений.",
            "Хороший день для покупки вещей для дома или семьи.",
            "Избегайте импульсивных трат. Составьте список необходимого перед походом в магазин."
        ],
        health: [
            "Обратите внимание на пищеварение. Ешьте небольшими порциями.",
            "Эмоциональное состояние требует заботы. Примите расслабляющую ванну или послушайте успокаивающую музыку.",
            "Звезды советуют избегать стрессовых ситуаций."
        ],
        advice: [
            "Доверьтесь своей интуиции. Она подскажет верное решение.",
            "Не бойтесь проявить уязвимость. Это сделает вас сильнее.",
            "Уделите время саморефлексии. Запишите свои мысли и чувства."
        ],
        luckyNumbers: [2, 7, 11, 29],
        dailyStones: ["Жемчуг", "Лунный камень", "Аквамарин"]
    },
    leo: {
        name: "Лев",
        dates: "23 июля - 22 августа",
        element: "Огонь",
        icon: "♌",
        stones: ["Топаз", "Янтарь", "Рубин"],
        love: [
            "Сегодня вы в центре внимания. Используйте это для укрепления отношений.",
            "Романтический вечер будет особенно удачным. Запланируйте что-то особенное.",
            "Проявите щедрость и внимание к партнеру. Это будет высоко оценено."
        ],
        finance: [
            "Хороший день для демонстрации своих талантов. Это может привести к финансовому успеху.",
            "Возможны дорогие покупки. Убедитесь, что они действительно необходимы.",
            "Звезды советуют быть осторожными с азартными играми и рискованными инвестициями."
        ],
        health: [
            "Энергия сегодня на пике. Займитесь спортом или активным отдыхом.",
            "Обратите внимание на сердечно-сосудистую систему. Избегайте переутомления.",
            "Звезды советуют проводить больше времени на солнце (с защитой от UV)."
        ],
        advice: [
            "Проявите лидерские качества, но не будьте слишком авторитарны.",
            "Ваша харизма сегодня особенно сильна. Используйте ее для достижения целей.",
            "Не бойтесь брать на себя ответственность за важные проекты."
        ],
        luckyNumbers: [1, 10, 19, 28],
        dailyStones: ["Топаз", "Цитрин", "Солнечный камень"]
    },
    virgo: {
        name: "Дева",
        dates: "23 августа - 22 сентября",
        element: "Земля",
        icon: "♍",
        stones: ["Сапфир", "Нефрит", "Яшма"],
        love: [
            "День гармонии и взаимопонимания. Идеальное время для решения бытовых вопросов.",
            "Проявите практичность в отношениях. Планирование совместного будущего будет удачным.",
            "Будьте внимательны к деталям. Мелочи могут иметь большое значение."
        ],
        finance: [
            "Отличный день для анализа финансов и планирования бюджета.",
            "Возможны выгодные покупки, особенно связанные с домом или работой.",
            "Звезды советуют отложить часть денег на будущее."
        ],
        health: [
            "Обратите внимание на пищеварительную систему. Ешьте больше клетчатки.",
            "Практикуйте mindfulness для снижения стресса.",
            "Звезды советуют регулярные, но умеренные физические нагрузки."
        ],
        advice: [
            "Ваша организованность сегодня поможет справиться с любыми задачами.",
            "Не будьте слишком критичны к себе и окружающим.",
            "Уделите время обучению или саморазвитию."
        ],
        luckyNumbers: [5, 14, 23, 32],
        dailyStones: ["Сапфир", "Авантюрин", "Агат"]
    },
    libra: {
        name: "Весы",
        dates: "23 сентября - 22 октября",
        element: "Воздух",
        icon: "♎",
        stones: ["Опал", "Бирюза", "Розовый кварц"],
        love: [
            "День гармонии и баланса в отношениях. Идеальное время для примирения.",
            "Социальная активность может привести к новым интересным знакомствам.",
            "Проявите дипломатичность в решении спорных вопросов."
        ],
        finance: [
            "Хороший день для партнерских финансовых проектов.",
            "Возможны траты на искусство или красивые вещи для дома.",
            "Звезды советуют избегать спонтанных покупок."
        ],
        health: [
            "Обратите внимание на почки и мочевыводящую систему. Пейте больше воды.",
            "Баланс между работой и отдыхом сегодня особенно важен.",
            "Звезды советуют занятия, сочетающие физическую и эстетическую составляющую (танцы, йога)."
        ],
        advice: [
            "Ваше умение видеть обе стороны ситуации сегодня будет как никогда полезным.",
            "Принимайте решения, основываясь на логике, а не только на эмоциях.",
            "Уделите время созданию гармоничной атмосферы вокруг себя."
        ],
        luckyNumbers: [6, 15, 24, 33],
        dailyStones: ["Опал", "Лазурит", "Розовый кварц"]
    },
    scorpio: {
        name: "Скорпион",
        dates: "23 октября - 21 ноября",
        element: "Вода",
        icon: "♏",
        stones: ["Топаз", "Гематит", "Малахит"],
        love: [
            "День страсти и глубоких чувств. Идеальное время для откровенных разговоров.",
            "Ваша привлекательность сегодня на высоте. Используйте это в своих интересах.",
            "Будьте осторожны с ревностью и контролем. Доверяйте партнеру."
        ],
        finance: [
            "Хороший день для решения финансовых вопросов, требующих глубинного анализа.",
            "Возможны неожиданные источники дохода.",
            "Звезды советуют быть осторожными с инвестициями в рискованные проекты."
        ],
        health: [
            "Обратите внимание на репродуктивную систему. Регулярные проверки важны.",
            "Эмоциональная интенсивность может привести к стрессу. Найдите здоровый выход эмоциям.",
            "Звезды советуют практики, связанные с трансформацией (йога, медитация)."
        ],
        advice: [
            "Ваша интуиция сегодня особенно сильна. Доверяйте внутреннему голосу.",
            "Не бойтесь перемен. Они приведут к положительным результатам.",
            "Проявите решительность в достижении целей."
        ],
        luckyNumbers: [8, 17, 26, 35],
        dailyStones: ["Гематит", "Обсидиан", "Гранат"]
    },
    sagittarius: {
        name: "Стрелец",
        dates: "22 ноября - 21 декабря",
        element: "Огонь",
        icon: "♐",
        stones: ["Бирюза", "Аметист", "Топаз"],
        love: [
            "День приключений и новых впечатлений в отношениях. Запланируйте совместную поездку.",
            "Оптимизм и чувство юмора помогут привлечь внимание интересующих людей.",
            "Будьте осторожны с излишней прямолинейностью. Иногда дипломатия важнее правды."
        ],
        finance: [
            "Хороший день для финансовых операций, связанных с путешествиями или образованием.",
            "Возможны неожиданные финансовые возможности.",
            "Звезды советуют планировать долгосрочные финансовые цели."
        ],
        health: [
            "Обратите внимание на печень и бедра. Умеренность в питании и физических нагрузках.",
            "Энергия сегодня высокая, но может быстро истощаться. Планируйте день с перерывами.",
            "Звезды советуют занятия на свежем воздухе."
        ],
        advice: [
            "Ваш оптимизм сегодня заразителен. Используйте это для мотивации окружающих.",
            "Не бойтесь ставить амбициозные цели. Звезды благоволят вам.",
            "Уделите время изучению чего-то нового."
        ],
        luckyNumbers: [9, 18, 27, 36],
        dailyStones: ["Бирюза", "Лазурит", "Содалит"]
    },
    capricorn: {
        name: "Козерог",
        dates: "22 декабря - 19 января",
        element: "Земля",
        icon: "♑",
        stones: ["Гранат", "Оникс", "Рубин"],
        love: [
            "День стабильности и надежности в отношениях. Идеальное время для серьезных разговоров о будущем.",
            "Проявите ответственность по отношению к партнеру. Это будет высоко оценено.",
            "Будьте осторожны с излишней строгостью и критикой."
        ],
        finance: [
            "Отличный день для долгосрочного финансового планирования и инвестиций.",
            "Трудолюбие будет вознаграждено. Возможны премии или повышение.",
            "Звезды советуют откладывать часть доходов на будущее."
        ],
        health: [
            "Обратите внимание на кости и суставы. Регулярные, но не чрезмерные нагрузки.",
            "Эмоциональная стабильность сегодня высока. Используйте это для продуктивной работы.",
            "Звезды советуют практиковать дисциплинированный подход к здоровью."
        ],
        advice: [
            "Ваша настойчивость сегодня поможет достичь любых целей.",
            "Не бойтесь брать на себя ответственность за крупные проекты.",
            "Уделите время карьерным планам и профессиональному развитию."
        ],
        luckyNumbers: [10, 19, 28, 37],
        dailyStones: ["Гранат", "Обсидиан", "Дымчатый кварц"]
    },
    aquarius: {
        name: "Водолей",
        dates: "20 января - 18 февраля",
        element: "Воздух",
        icon: "♒",
        stones: ["Аметист", "Аквамарин", "Лазурит"],
        love: [
            "День дружбы и общих интересов в отношениях. Идеальное время для совместных проектов.",
            "Нестандартный подход к романтике принесет интересные результаты.",
            "Будьте осторожны с эмоциональной отстраненностью. Проявите участие."
        ],
        finance: [
            "Хороший день для финансовых операций, связанных с технологиями или инновациями.",
            "Возможны неожиданные источники дохода благодаря оригинальным идеям.",
            "Звезды советуют инвестировать в образование или новые навыки."
        ],
        health: [
            "Обратите внимание на циркуляцию крови и голени. Регулярные прогулки полезны.",
            "Ментальное здоровье сегодня важно. Избегайте информационной перегрузки.",
            "Звезды советуют нетрадиционные методы оздоровления."
        ],
        advice: [
            "Ваша оригинальность сегодня на высоте. Используйте нестандартные подходы к решению проблем.",
            "Не бойтесь идти против течения, если уверены в своей правоте.",
            "Уделите время общению с единомышленниками."
        ],
        luckyNumbers: [11, 20, 29, 38],
        dailyStones: ["Аметист", "Флюорит", "Селенит"]
    },
    pisces: {
        name: "Рыбы",
        dates: "19 февраля - 20 марта",
        element: "Вода",
        icon: "♓",
        stones: ["Аквамарин", "Жемчуг", "Аметист"],
        love: [
            "День романтики и глубоких эмоциональных связей. Идеальное время для признаний.",
            "Интуиция подскажет, как улучшить отношения. Доверьтесь внутреннему голосу.",
            "Будьте осторожны с иллюзиями и идеализацией партнера."
        ],
        finance: [
            "Хороший день для финансовых операций, связанных с творчеством или духовным развитием.",
            "Возможна финансовая помощь от близких людей.",
            "Звезды советуют быть осторожными с эмоциональными покупками."
        ],
        health: [
            "Обратите внимание на ступни и лимфатическую систему. Массаж или ванночки для ног будут полезны.",
            "Эмоциональная чувствительность сегодня высока. Избегайте стрессовых ситуаций.",
            "Звезды советуют практики, связанные с водой (плавание, аквааэробика)."
        ],
        advice: [
            "Ваша эмпатия сегодня особенно сильна. Используйте это для помощи другим.",
            "Доверьтесь творческому вдохновению. Оно приведет к интересным результатам.",
            "Уделите время духовным практикам или медитации."
        ],
        luckyNumbers: [12, 21, 30, 39],
        dailyStones: ["Аквамарин", "Лунный камень", "Хризоколла"]
    }
};

// DOM элементы
const zodiacSelect = document.getElementById('zodiac-sign');
const getPredictionBtn = document.getElementById('get-prediction');
const randomSignBtn = document.getElementById('random-sign');
const resultCard = document.getElementById('result');
const noResult = document.getElementById('no-result');
const zodiacIcon = document.getElementById('zodiac-icon');
const zodiacName = document.getElementById('zodiac-name');
const zodiacDates = document.getElementById('zodiac-dates');
const zodiacElement = document.getElementById('zodiac-element');
const lovePrediction = document.getElementById('love-prediction');
const financePrediction = document.getElementById('finance-prediction');
const healthPrediction = document.getElementById('health-prediction');
const advicePrediction = document.getElementById('advice-prediction');
const luckyNumber = document.getElementById('lucky-number');
const stoneOfDay = document.getElementById('stone-of-day');
const talismanStones = document.getElementById('talisman-stones');
const energyFill = document.getElementById('energy-fill');
const countdownElement = document.getElementById('countdown');
const subscriptionForm = document.getElementById('subscription-form');
const shareVkBtn = document.getElementById('share-vk');
const shareTelegramBtn = document.getElementById('share-telegram');
const shareTwitterBtn = document.getElementById('share-twitter');

// Функция для получения случайного элемента массива
function getRandomItem(array) {
    return array[Math.floor(Math.random() * array.length)];
}

// Функция для получения случайного числа из массива
function getRandomNumber(array) {
    return getRandomItem(array);
}

// Функция для обновления энергии знака (случайное значение от 50% до 100%)
function updateEnergy() {
    const energy = Math.floor(Math.random() * 51) + 50; // 50-100%
    energyFill.style.width = `${energy}%`;
    energyFill.textContent = `${energy}%`;
    
    // Изменение цвета в зависимости от уровня энергии
    if (energy >= 80) {
        energyFill.style.background = "linear-gradient(to right, #00ff00, #00cc00)";
    } else if (energy >= 60) {
        energyFill.style.background = "linear-gradient(to right, #ffcc00, #ff9900)";
    } else {
        energyFill.style.background = "linear-gradient(to right, #ff3300, #cc0000)";
    }
}

// Функция для обновления таймера
function updateCountdown() {
    const now = new Date();
    const tomorrow = new Date(now);
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(0, 0, 0, 0);
    
    const diff = tomorrow - now;
    
    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    countdownElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

// Функция для генерации предсказания
function generatePrediction(sign) {
    const data = zodiacData[sign];
    
    if (!data) return;
    
    // Обновление информации о знаке
    zodiacIcon.textContent = data.icon;
    zodiacName.textContent = data.name;
    zodiacDates.textContent = data.dates;
    zodiacElement.innerHTML = `Стихия: <span>${data.element}</span>`;
    
    // Генерация случайных предсказаний
    lovePrediction.textContent = getRandomItem(data.love);
    financePrediction.textContent = getRandomItem(data.finance);
    healthPrediction.textContent = getRandomItem(data.health);
    advicePrediction.textContent = getRandomItem(data.advice);
    
    // Генерация случайных значений
    luckyNumber.textContent = getRandomNumber(data.luckyNumbers);
    stoneOfDay.textContent = getRandomItem(data.dailyStones);
    talismanStones.textContent = data.stones.join(", ");
    
    // Обновление энергии
    updateEnergy();
    
    // Показ результата и скрытие placeholder
    resultCard.classList.remove('hidden');
    noResult.classList.add('hidden');
    
    // Сохранение последнего выбора в localStorage
    localStorage.setItem('lastZodiacSign', sign);
    localStorage.setItem('lastPredictionTime', new Date().toISOString());
}

// Функция для получения случайного знака
function getRandomSign() {
    const signs = Object.keys(zodiacData);
    const randomSign = getRandomItem(signs);
    zodiacSelect.value = randomSign;
    generatePrediction(randomSign);
}

// Функция для инициализации страницы
function initPage() {
    // Проверка последнего выбора пользователя
    const lastSign = localStorage.getItem('lastZodiacSign');
    const lastPredictionTime = localStorage.getItem('lastPredictionTime');
    
    if (lastSign && lastPredictionTime) {
        const lastTime = new Date(lastPredictionTime);
        const now = new Date();
        const hoursDiff = (now - lastTime) / (1000 * 60 * 60);
        
        // Если последнее гадание было менее 24 часов назад, показать результат
        if (hoursDiff < 24) {
            zodiacSelect.value = lastSign;
            generatePrediction(lastSign);
        }
    }
    
    // Обновление таймера каждую секунду
    updateCountdown();
    setInterval(updateCountdown, 1000);
    
    // Обновление энергии каждые 10 секунд
    updateEnergy();
    setInterval(updateEnergy, 10000);
}

// Обработчики событий
getPredictionBtn.addEventListener('click', () => {
    const selectedSign = zodiacSelect.value;
    
    if (!selectedSign) {
        alert('Пожалуйста, выберите знак зодиака');
        return;
    }
    
    generatePrediction(selectedSign);
});

randomSignBtn.addEventListener('click', getRandomSign);

subscriptionForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const sign = document.getElementById('subscription-zodiac').value;
    
    if (email) {
        alert(`Спасибо за подписку, ${zodiacData[sign].name}! Вы будете получать предсказания на адрес ${email}`);
        subscriptionForm.reset();
    }
});

// Обработчики для кнопок "Поделиться"
shareVkBtn.addEventListener('click', () => {
    const sign = zodiacSelect.value;
    if (sign) {
        const data = zodiacData[sign];
        const text = `Мое предсказание для ${data.name} на сегодня: ${lovePrediction.textContent.substring(0, 100)}...`;
        const url = `https://vk.com/share.php?url=${encodeURIComponent(window.location.href)}&title=${encodeURIComponent(`Гадание для ${data.name}`)}&description=${encodeURIComponent(text)}`;
        window.open(url, '_blank', 'width=600,height=400');
    }
});

shareTelegramBtn.addEventListener('click', () => {
    const sign = zodiacSelect.value;
    if (sign) {
        const data = zodiacData[sign];
        const text = `Мое предсказание для ${data.name} на сегодня: ${lovePrediction.textContent.substring(0, 100)}...`;
        const url = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(text)}`;
        window.open(url, '_blank', 'width=600,height=400');
    }
});

shareTwitterBtn.addEventListener('click', () => {
    const sign = zodiacSelect.value;
    if (sign) {
        const data = zodiacData[sign];
        const text = `Мое предсказание для ${data.name} на сегодня: ${lovePrediction.textContent.substring(0, 100)}...`;
        const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`;
        window.open(url, '_blank', 'width=600,height=400');
    }
});

// Инициализация страницы при загрузке
document.addEventListener('DOMContentLoaded', initPage);
