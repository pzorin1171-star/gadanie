// Данные для всех знаков зодиака
const zodiacData = {
    aries: {
        name: "Овен",
        element: "Огонь",
        icon: "♈",
        stones: ["Аметист", "Горный хрусталь", "Алмаз"],
        dailyStones: ["Аметист", "Красная яшма", "Рубин"],
        love: [
            "Сегодня звёзды советуют проявить инициативу в отношениях. Смелость будет вознаграждена.",
            "Встреча с интересным человеком возможна в неожиданном месте. Будь открыт к новым знакомствам.",
            "Романтический вечер пройдет под знаком страсти. Не сдерживай эмоции."
        ],
        finance: [
            "Финансовая удача сегодня на твоей стороне. Возможны неожиданные поступления.",
            "Хороший день для инвестиций в себя. Покупка курса или книги окупится в будущем.",
            "Прояви осторожность с крупными тратами. Лучше отложить решение до завтра."
        ],
        health: [
            "Энергия бьет ключом. Идеальный день для спортивных достижений.",
            "Избегай переутомления. Звёзды советуют чередовать активность с отдыхом.",
            "Обрати внимание на питание. Добавь в рацион больше белковой пищи."
        ],
        advice: [
            "Не бойся брать ответственность. Сегодня ты сможешь справиться с любыми задачами.",
            "Твоя уверенность привлекает удачу. Действуй смело и решительно.",
            "Прислушайся к интуиции в рабочих вопросах. Она подскажет верное решение."
        ],
        luckyNumbers: [7, 14, 21, 28]
    },
    taurus: {
        name: "Телец",
        element: "Земля",
        icon: "♉",
        stones: ["Изумруд", "Бирюза", "Агат"],
        dailyStones: ["Изумруд", "Бирюза", "Малахит"],
        love: [
            "Гармония в отношениях достигается через искренний разговор. Поделись чувствами.",
            "Одиноким Тельцам звёзды сулят встречу с надежным человеком. Доверяй своей интуиции.",
            "Совместное планирование будущего укрепит связь. Обсудите мечты и цели."
        ],
        finance: [
            "Финансовая стабильность обеспечена. Хорошее время для создания бюджета.",
            "Неожиданная финансовая возможность может появиться вечером. Будь внимателен.",
            "Избегай импульсивных покупок. Дай себе время обдумать необходимость трат."
        ],
        health: [
            "Звёзды советуют обратить внимание на осанку. Небольшая разминка улучшит самочувствие.",
            "Эмоциональное равновесие важно сегодня. Медитация поможет сохранить спокойствие.",
            "Прогулка на природе зарядит энергией и снимет напряжение."
        ],
        advice: [
            "Твоя настойчивость приведет к цели, но не забывай о гибкости.",
            "Доверься внутреннему голосу при принятии важных решений.",
            "Удели время уюту и комфорту. Создай пространство для отдыха."
        ],
        luckyNumbers: [4, 6, 15, 24]
    },
    gemini: {
        name: "Близнецы",
        element: "Воздух",
        icon: "♊",
        stones: ["Агат", "Тигровый глаз", "Цитрин"],
        dailyStones: ["Тигровый глаз", "Хризопраз", "Горный хрусталь"],
        love: [
            "Общение — ключ к гармонии. Откровенный разговор сблизит вас.",
            "Социальная активность принесет интересные знакомства. Не отказывайся от приглашений.",
            "Незначительные разногласия быстро разрешатся. Прояви дипломатичность."
        ],
        finance: [
            "Хороший день для финансовых переговоров. Твои аргументы будут убедительны.",
            "Возможна небольшая, но приятная прибыль от хобби или творчества.",
            "Проверь свои финансовые обязательства. Систематизация поможет избежать ошибок."
        ],
        health: [
            "Обрати внимание на дыхание. Практика глубокого дыхания снимет стресс.",
            "Энергия может быстро истощаться. Планируй день с перерывами.",
            "Звёзды советуют занятия, сочетающие физическую и умственную активность."
        ],
        advice: [
            "Сосредоточься на одной задаче. Глубина важнее широты охвата.",
            "Твои коммуникативные навыки на пике. Используй их для продвижения идей.",
            "Будь готов к неожиданным новостям. Сохраняй гибкость мышления."
        ],
        luckyNumbers: [3, 12, 21, 30]
    },
    cancer: {
        name: "Рак",
        element: "Вода",
        icon: "♋",
        stones: ["Жемчуг", "Лунный камень", "Изумруд"],
        dailyStones: ["Жемчуг", "Лунный камень", "Аквамарин"],
        love: [
            "Эмоциональная близость сегодня важнее слов. Прояви заботу жестами.",
            "Семейные связи укрепятся через совместные воспоминания.",
            "Романтический вечер в уютной обстановке подарит гармонию."
        ],
        finance: [
            "Интуиция подскажет выгодные решения. Доверься внутреннему чувству.",
            "Хорошее время для покупок для дома. Качество важнее количества.",
            "Избегай эмоциональных трат. Составь список перед походом в магазин."
        ],
        health: [
            "Забота о эмоциональном состоянии — приоритет. Релаксация снимет напряжение.",
            "Обрати внимание на питание. Легкая пища улучшит самочувствие.",
            "Водные процедуры помогут восстановить энергию и очистить мысли."
        ],
        advice: [
            "Защити свои границы, но оставайся открытым для близких.",
            "Творческое самовыражение принесет удовлетворение и покой.",
            "Удели время саморефлексии. Дневник поможет прояснить мысли."
        ],
        luckyNumbers: [2, 7, 11, 29]
    },
    leo: {
        name: "Лев",
        element: "Огонь",
        icon: "♌",
        stones: ["Топаз", "Янтарь", "Рубин"],
        dailyStones: ["Топаз", "Цитрин", "Солнечный камень"],
        love: [
            "Ты в центре внимания. Используй это для укрепления отношений.",
            "Щедрость и внимание к партнеру будут высоко оценены.",
            "Спонтанный романтический жест создаст волшебную атмосферу."
        ],
        finance: [
            "Демонстрация талантов может принести финансовую выгоду.",
            "Избегай чрезмерных трат на впечатления. Баланс — ключ к стабильности.",
            "Хороший день для переговоров о повышении или новых проектах."
        ],
        health: [
            "Физическая активность принесет удовольствие и энергию.",
            "Солнечные ванны (с защитой) поднимут настроение и тонус.",
            "Обрати внимание на сердце. Умеренность в нагрузках сохранит баланс."
        ],
        advice: [
            "Лидерские качества проявятся ярко. Используй их с мудростью.",
            "Твоя харизма привлекает возможности. Не бойся их использовать.",
            "Великодушие усилит твое влияние и принесет уважение."
        ],
        luckyNumbers: [1, 10, 19, 28]
    },
    virgo: {
        name: "Дева",
        element: "Земля",
        icon: "♍",
        stones: ["Сапфир", "Нефрит", "Яшма"],
        dailyStones: ["Сапфир", "Авантюрин", "Агат"],
        love: [
            "Практичность в отношениях создаст стабильность. Обсудите бытовые вопросы.",
            "Внимание к деталям покажет вашу заботу. Маленькие жесты имеют значение.",
            "Гармония через взаимопонимание. Слушай и будь услышан."
        ],
        finance: [
            "Идеальный день для анализа расходов и планирования бюджета.",
            "Выгодные покупки возможны, особенно для дома или работы.",
            "Систематизация финансов принесет чувство безопасности."
        ],
        health: [
            "Правильное питание и режим улучшат самочувствие.",
            "Медитативные практики снимут стресс и наведут порядок в мыслях.",
            "Регулярные, умеренные физические нагрузки поддержат тонус."
        ],
        advice: [
            "Организованность — твой союзник в достижении целей.",
            "Не перегружай себя критикой. Прими себя и других с пониманием.",
            "Удели время обучению. Новые знания откроют перспективы."
        ],
        luckyNumbers: [5, 14, 23, 32]
    },
    libra: {
        name: "Весы",
        element: "Воздух",
        icon: "♎",
        stones: ["Опал", "Бирюза", "Розовый кварц"],
        dailyStones: ["Опал", "Лазурит", "Розовый кварц"],
        love: [
            "Гармония и баланс в отношениях. Идеальное время для примирения.",
            "Социальные мероприятия могут привести к интересным знакомствам.",
            "Дипломатичность разрешит спорные вопросы без конфликтов."
        ],
        finance: [
            "Партнерские финансовые проекты имеют высокие шансы на успех.",
            "Траты на искусство или красоту принесут эстетическое удовлетворение.",
            "Избегай спонтанных решений. Взвешенный подход принесет результат."
        ],
        health: [
            "Баланс между активностью и отдыхом важен для самочувствия.",
            "Танцы или йога сочетат физическую активность с грацией.",
            "Достаточное потребление воды поддержит красоту и здоровье."
        ],
        advice: [
            "Способность видеть разные стороны ситуации поможет в принятии решений.",
            "Красота и гармония вокруг создадут внутренний покой.",
            "Справедливость и дипломатия укрепят твои позиции."
        ],
        luckyNumbers: [6, 15, 24, 33]
    },
    scorpio: {
        name: "Скорпион",
        element: "Вода",
        icon: "♏",
        stones: ["Топаз", "Гематит", "Малахит"],
        dailyStones: ["Гематит", "Обсидиан", "Гранат"],
        love: [
            "Глубокие эмоциональные связи укрепятся через откровенность.",
            "Твоя привлекательность на высоте. Используй это с мудростью.",
            "Страсть и доверие создадут незабываемую атмосферу близости."
        ],
        finance: [
            "Интуиция в финансовых вопросах не подведет. Доверься внутреннему голосу.",
            "Неожиданные источники дохода могут появиться через связи.",
            "Глубокий анализ инвестиций окупится в будущем."
        ],
        health: [
            "Эмоциональная интенсивность требует здорового выхода. Творчество или спорт помогут.",
            "Практики трансформации (йога, медитация) укрепят дух.",
            "Внимание к интуитивным сигналам тела предотвратит проблемы."
        ],
        advice: [
            "Интуиция сегодня особенно сильна. Следуй за внутренним знанием.",
            "Глубина восприятия откроет скрытые возможности.",
            "Решительность в действиях принесет желаемые изменения."
        ],
        luckyNumbers: [8, 17, 26, 35]
    },
    sagittarius: {
        name: "Стрелец",
        element: "Огонь",
        icon: "♐",
        stones: ["Бирюза", "Аметист", "Топаз"],
        dailyStones: ["Бирюза", "Лазурит", "Содалит"],
        love: [
            "Приключения и новые впечатления обогатят отношения.",
            "Оптимизм и чувство юмора привлекут интересных людей.",
            "Совместное путешествие или обучение сблизит вас."
        ],
        finance: [
            "Инвестиции в образование или путешествия окупятся многократно.",
            "Неожиданные финансовые возможности откроются через общение.",
            "Планирование дальних целей создаст финансовую устойчивость."
        ],
        health: [
            "Активный отдых на природе зарядит энергией и оптимизмом.",
            "Умеренность в физических нагрузках сохранит силы.",
            "Духовные практики расширят сознание и укрепят здоровье."
        ],
        advice: [
            "Оптимизм заразителен. Используй его для вдохновения других.",
            "Смелость в постановке амбициозных целей приведет к успеху.",
            "Открытость новому опыту обогатит твою жизнь."
        ],
        luckyNumbers: [9, 18, 27, 36]
    },
    capricorn: {
        name: "Козерог",
        element: "Земля",
        icon: "♑",
        stones: ["Гранат", "Оникс", "Рубин"],
        dailyStones: ["Гранат", "Обсидиан", "Дымчатый кварц"],
        love: [
            "Стабильность и надежность укрепят отношения. Серьезный разговор о будущем.",
            "Ответственность по отношению к партнеру будет высоко оценена.",
            "Традиции и семейные ценности создадут прочную связь."
        ],
        finance: [
            "Долгосрочное планирование принесет финансовую стабильность.",
            "Трудолюбие будет вознаграждено. Возможны премии или повышение.",
            "Консервативный подход к инвестициям защитит капитал."
        ],
        health: [
            "Регулярные, последовательные нагрузки укрепят здоровье.",
            "Дисциплина в режиме дня создаст основу для благополучия.",
            "Внимание к костям и суставам предотвратит проблемы."
        ],
        advice: [
            "Терпение и настойчивость приведут к цели.",
            "Ответственность за крупные проекты укрепит авторитет.",
            "Баланс между работой и личной жизнью создаст гармонию."
        ],
        luckyNumbers: [10, 19, 28, 37]
    },
    aquarius: {
        name: "Водолей",
        element: "Воздух",
        icon: "♒",
        stones: ["Аметист", "Аквамарин", "Лазурит"],
        dailyStones: ["Аметист", "Флюорит", "Селенит"],
        love: [
            "Дружба и общие интересы создадут прочную основу отношений.",
            "Нестандартный подход к романтике принесет свежесть.",
            "Совместные проекты или хобби укрепят связь."
        ],
        finance: [
            "Инновационные идеи могут принести финансовую выгоду.",
            "Технологии или новые подходы откроют возможности.",
            "Инвестиции в знания или необычные проекты окупятся."
        ],
        health: [
            "Ментальное здоровье важно. Избегай информационной перегрузки.",
            "Нестандартные оздоровительные практики принесут пользу.",
            "Внимание к циркуляции и дыханию улучшит самочувствие."
        ],
        advice: [
            "Оригинальность мышления решит сложные задачи.",
            "Готовность идти против течения откроет новые пути.",
            "Общение с единомышленниками вдохновит и поддержит."
        ],
        luckyNumbers: [11, 20, 29, 38]
    },
    pisces: {
        name: "Рыбы",
        element: "Вода",
        icon: "♓",
        stones: ["Аквамарин", "Жемчуг", "Аметист"],
        dailyStones: ["Аквамарин", "Лунный камень", "Хризоколла"],
        love: [
            "Романтика и глубокие чувства создадут волшебную атмосферу.",
            "Интуиция подскажет, как углубить связь с партнером.",
            "Искренность и эмоциональная открытость принесут гармонию."
        ],
        finance: [
            "Творческий подход к финансам принесет неожиданную прибыль.",
            "Интуиция в денежных вопросах будет точной. Доверься ей.",
            "Помощь от близких или духовных наставников возможна."
        ],
        health: [
            "Водные процедуры успокоят нервы и восстановят энергию.",
            "Эмоциональная чувствительность требует бережного отношения.",
            "Творчество и мечтательность как лекарство от стресса."
        ],
        advice: [
            "Эмпатия поможет в понимании других и себя.",
            "Доверься творческому потоку. Он приведет к вдохновению.",
            "Духовные практики углубят связь с вселенной."
        ],
        luckyNumbers: [12, 21, 30, 39]
    }
};

// Краткие гороскопы для всех знаков
const dailyHoroscopes = [
    "Сегодня звёзды благоволят новым начинаниям. Смелость будет вознаграждена.",
    "День подходит для завершения старых дел. Расчистите пространство для нового.",
    "Финансовая удача улыбнется тем, кто действует разумно и осмотрительно.",
    "Любовная энергия сегодня особенно сильна. Откройте сердце для новых чувств.",
    "Звёзды советуют уделить время саморазвитию. Новые знания откроют перспективы.",
    "Эмоциональная стабильность будет ключом к успеху в любых начинаниях.",
    "Творческий подход к решению задач принесет неожиданно хорошие результаты.",
    "Доверьтесь интуиции в важных вопросах. Она подскажет верный путь.",
    "Общение с близкими людьми подарит поддержку и вдохновение.",
    "Физическая активность поможет сбросить напряжение и придаст энергии.",
    "Сегодня хороший день для планирования будущего. Мечтайте смелее.",
    "Внимание к деталям поможет избежать ошибок и достичь совершенства."
];

// DOM элементы
const zodiacItems = document.querySelectorAll('.zodiac-item');
const getPredictionBtn = document.getElementById('get-prediction');
const randomSignBtn = document.getElementById('random-sign');
const resultCard = document.getElementById('result');
const zodiacIcon = document.getElementById('zodiac-icon');
const zodiacName = document.getElementById('zodiac-name');
const zodiacElement = document.getElementById('zodiac-element');
const lovePrediction = document.getElementById('love-prediction');
const financePrediction = document.getElementById('finance-prediction');
const healthPrediction = document.getElementById('health-prediction');
const advicePrediction = document.getElementById('advice-prediction');
const luckyNumber = document.getElementById('lucky-number');
const stoneOfDay = document.getElementById('stone-of-day');
const navLinks = document.querySelectorAll('.nav-link');
const sections = document.querySelectorAll('section[id$="-section"]');
const horoscopeGrid = document.getElementById('horoscope-grid');

// Текущий выбранный знак
let selectedSign = 'aries';

// Функция для получения случайного элемента массива
function getRandomItem(array) {
    return array[Math.floor(Math.random() * array.length)];
}

// Функция для получения случайного числа из массива
function getRandomNumber(array) {
    return getRandomItem(array);
}

// Функция для генерации предсказания
function generatePrediction(sign) {
    const data = zodiacData[sign];
    
    if (!data) return;
    
    // Обновление информации о знаке
    zodiacIcon.textContent = data.icon;
    zodiacName.textContent = data.name;
    zodiacElement.textContent = data.element;
    
    // Генерация случайных предсказаний
    lovePrediction.textContent = getRandomItem(data.love);
    financePrediction.textContent = getRandomItem(data.finance);
    healthPrediction.textContent = getRandomItem(data.health);
    advicePrediction.textContent = getRandomItem(data.advice);
    
    // Генерация случайных значений
    luckyNumber.textContent = getRandomNumber(data.luckyNumbers);
    stoneOfDay.textContent = getRandomItem(data.dailyStones);
    
    // Показ результата
    resultCard.style.display = 'block';
    
    // Сохранение последнего выбора в localStorage
    localStorage.setItem('lastZodiacSign', sign);
    localStorage.setItem('lastPredictionTime', new Date().toISOString());
}

// Функция для выбора знака
function selectZodiacItem(sign) {
    // Убираем выделение у всех элементов
    zodiacItems.forEach(item => {
        item.classList.remove('selected');
    });
    
    // Находим и выделяем выбранный элемент
    const selectedItem = document.querySelector(`[data-sign="${sign}"]`);
    if (selectedItem) {
        selectedItem.classList.add('selected');
    }
    
    selectedSign = sign;
}

// Функция для получения случайного знака
function getRandomSign() {
    const signs = Object.keys(zodiacData);
    const randomSign = getRandomItem(signs);
    selectZodiacItem(randomSign);
    generatePrediction(randomSign);
}

// Функция для переключения секций
function switchSection(sectionId) {
    // Скрываем все секции
    sections.forEach(section => {
        section.style.display = 'none';
        section.classList.remove('active-section');
    });
    
    // Показываем выбранную секцию
    const activeSection = document.getElementById(`${sectionId}-section`);
    if (activeSection) {
        activeSection.style.display = 'block';
        activeSection.classList.add('active-section');
    }
    
    // Обновляем активную ссылку в навигации
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.dataset.section === sectionId) {
            link.classList.add('active');
        }
    });
}

// Функция для заполнения гороскопа на день
function populateDailyHoroscope() {
    horoscopeGrid.innerHTML = '';
    
    Object.keys(zodiacData).forEach((sign, index) => {
        const data = zodiacData[sign];
        const horoscope = dailyHoroscopes[index] || dailyHoroscopes[0];
        
        const horoscopeCard = document.createElement('div');
        horoscopeCard.className = 'horoscope-card';
        horoscopeCard.innerHTML = `
            <div class="zodiac-symbol">${data.icon}</div>
            <h4>${data.name}</h4>
            <p>${horoscope}</p>
            <div class="horoscope-details">
                <span class="element">${data.element}</span>
                <span class="lucky-number">${getRandomNumber(data.luckyNumbers)}</span>
            </div>
        `;
        
        horoscopeGrid.appendChild(horoscopeCard);
    });
}

// Функция для инициализации страницы
function initPage() {
    // Проверка последнего выбора пользователя
    const lastSign = localStorage.getItem('lastZodiacSign');
    const lastPredictionTime = localStorage.getItem('lastPredictionTime');
    
    if (lastSign) {
        selectZodiacItem(lastSign);
        
        if (lastPredictionTime) {
            const lastTime = new Date(lastPredictionTime);
            const now = new Date();
            const hoursDiff = (now - lastTime) / (1000 * 60 * 60);
            
            // Если последнее гадание было менее 24 часов назад, показываем результат
            if (hoursDiff < 24) {
                generatePrediction(lastSign);
            }
        }
    } else {
        // По умолчанию выбираем Овна
        selectZodiacItem('aries');
    }
    
    // Заполняем гороскоп на день
    populateDailyHoroscope();
}

// Обработчики событий для выбора знаков зодиака
zodiacItems.forEach(item => {
    item.addEventListener('click', () => {
        const sign = item.dataset.sign;
        selectZodiacItem(sign);
    });
});

// Обработчик для кнопки "Узнать судьбу"
getPredictionBtn.addEventListener('click', () => {
    generatePrediction(selectedSign);
});

// Обработчик для кнопки "Случайный знак"
randomSignBtn.addEventListener('click', getRandomSign);

// Обработчики для навигации
navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const section = link.dataset.section;
        switchSection(section);
    });
});

// Инициализация страницы при загрузке
document.addEventListener('DOMContentLoaded', initPage);

// Анимация колеса зодиака
document.addEventListener('DOMContentLoaded', () => {
    const wheelIcons = document.querySelectorAll('.wheel-icon');
    wheelIcons.forEach((icon, index) => {
        icon.style.animationDelay = `${index * 0.2}s`;
    });
});

// Добавляем эффект параллакса для фона
document.addEventListener('mousemove', (e) => {
    const moveX = (e.clientX - window.innerWidth / 2) * 0.01;
    const moveY = (e.clientY - window.innerHeight / 2) * 0.01;
    
    document.querySelectorAll('.constellation').forEach((star, index) => {
        const speed = (index + 1) * 0.5;
        star.style.transform = `translate(${moveX * speed}px, ${moveY * speed}px)`;
    });
});
